$(document).ready(function(){$(".chosen-select:not(.disable_search)").chosen();$('input[name="PaymentMethod"]').off("click").on("click",function(){$(this).val()==="NL"?($("#nganluongContent").show(),$("#nganhangcontent").hide()):$(this).val()==="ATM_ONLINE"?($("#nganluongContent").hide(),$("#nganhangcontent").show()):($("#nganluongContent").hide(),$("#nganhangcontent").hide())});$("#inputDisCode").on("change keydown paste input",function(){$("#discount-mess").css("display","none");$("#discount-check").css("display","none");$("#totalPrice").text($("#originPrice").val())})});var selectAction={GenerateDistrict:function(n){var t=null;$("body").data("GetListDistrict_"+n)!==null&&(t=$("body").data("GetListDistrict_"+n));t===undefined?$.ajax({type:"Post",url:"check-out/gen-district",data:{provinceCode:n},success:function(i){t=i;$("body").data("GetListDistrict_"+n,t)},complete:function(){selectAction.BindingDistrict(0,t)},error:function(){}}):selectAction.BindingDistrict(0,t)},BindingDistrict:function(n,t){$("#cboDistrict").find("option").remove();var i=$("#cboDistrict").html();t!==undefined&&$.each(t,function(t,r){i+=n===r.DistrictCode?'<option value="'+r.DistrictCode+'" selected="selected">'+r.Name+"<\/option>":'<option value="'+r.DistrictCode+'">'+r.Name+"<\/option>"});$("#cboDistrict").html(i).trigger("chosen:updated")},GenerateWard:function(n){var t=null;$("body").data("GetListWard_"+n)!==null&&(t=$("body").data("GetListWard_"+n));t===undefined?$.ajax({type:"Post",url:"check-out/gen-ward",data:{districtCode:n},success:function(i){t=i;$("body").data("GetListWard_"+n,t)},complete:function(){selectAction.BindingWard(0,t)},error:function(){}}):selectAction.BindingWard(0,t)},BindingWard:function(n,t){$("#cboWard").find("option").remove();var i=$("#cboWard").html();t!==undefined&&$.each(t,function(t,r){i+=n===r.WardCode?'<option value="'+r.WardCode+'" selected="selected">'+r.Name+"<\/option>":'<option value="'+r.WardCode+'">'+r.Name+"<\/option>"});$("#cboWard").html(i).trigger("chosen:updated")}},discountCode={checkDiscountCode:function(){var n=$("#inputDisCode").val();if(n==="")return $("#discount-mess").css("display","inline-block"),$("#discount-mess").text("Vui lòng nhập mã khuyến mại tại đây."),!1;$.ajax({type:"Post",url:"check-out/checkDiscountCode",data:{discountCode:n},success:function(n){n.Error===!0?($("#discount-mess").css("display","inline-block"),$("#discount-mess").text(n.Title),$("#discount-check").css("display","none")):($("#discount-check").css("display","inline-block"),$("#discount-mess").css("display","none"),discountCode.UpdateTotalPrice(n.Obj.DiscountRate))}})},UpdateTotalPrice:function(n){var i=$("#totalPrice").text().replace(".","").replace("VND","").trim(),t=parseFloat(i);t>0&&(t=t-t*parseInt(n)/100,$("#totalPrice").text(t).formatCurrency({roundToDecimalPlace:-1,symbol:""}),$("#totalPrice").text($("#totalPrice").text().replace(",",".")+" VND"))}};