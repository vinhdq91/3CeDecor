$(document).ready(function(){productAdmin.Init();articleBlogAdmin.Init();strategyAdmin.Init()});var productAdmin={Init:function(){productAdmin.ChangeImage()},ChangeImage:function(){$(".editor-img").change(function(){var i=this.files[0],n=document.createElement("img"),t;n.src=window.URL.createObjectURL(i);n.style.height="30px";n.onload=function(){window.URL.revokeObjectURL(this.src)};t=$(this).prev();$(t).empty();$(t).append(n)})},ChangeStatus:function(n){$.ajax({type:"Post",url:"Admin/ProductAdmin/ChangeStatus",data:{productId:n},success:function(){$(document.body).load(location.href)}})},CheckAllProduct:function(n){var t=n.target;$(t).is(":checked")?($(".select-product-item").each(function(){$(this).prop("checked",!0);var n=parseInt($(this).val());productAdmin.GetProductItemSelect(n,this)}),$(".btn-remove").removeAttr("disabled")):($(".select-product-item").each(function(){$(this).prop("checked",!1);$(".list-product-item-selected").val("")}),$(".btn-remove").attr("disabled","disabled"))},GetProductItemSelect:function(n,t){var i=$(".list-product-item-selected").val(),r=t.target!==undefined?t.target:t;$(r).is(":checked")?n>0&&(i===""?i=n+"":i+=","+n,$(".btn-remove").removeAttr("disabled")):n>0&&(i=i.indexOf(","+n)!==-1?i.replace(","+n,""):i.replace(n,""),i===""&&$(".btn-remove").attr("disabled","disabled"));i=i.replace(new RegExp("^,|,$","g"),"");$(".list-product-item-selected").val(i)},RemoveAllSelectedInList:function(){if($(".list-product-item-selected").val()!==undefined){var n=$(".list-product-item-selected").val().split(",");n.length>0&&$.ajax({type:"Post",url:"Admin/ProductAdmin/Delete",data:{lstProductIds:n},success:function(){$(document.body).load(location.href)}})}},RemoveAllSelectedInTopic:function(n){if($(".list-product-item-selected").val()!==undefined){var t=$(".list-product-item-selected").val().split(",");t.length>0&&$.ajax({type:"Post",url:"RemoveFromTopic",data:{lstProductIds:t,topicId:n},success:function(){$(".pop-up .modal").css("display","none");$(document.body).load(location.href)}})}}},popUpProductTopic={OpenClosePopup:function(){$(".pop-up .modal").css("display")==="none"?($(".pop-up .modal").css("display","block"),popUpProductTopic.LoadProductList()):$(".pop-up .modal").css("display","none")},LoadProductList:function(){$.trim($(".modal-body").html()).length||$.ajax({type:"Post",url:"GetProductListNormalType",success:function(n){n!==null&&n!==undefined&&($(".modal-body").append(n),$.fn.DataTable.isDataTable("#myTable-popup")||$("#myTable-popup").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!1,responsive:!0,stateSave:!0}))}})},GetProductSelect:function(n){if(n>0){var t=$(".list-product-selected").val();t===""?t=n+"":t+=","+n;$(".list-product-selected").val(t)}},SaveListProductToTopic:function(n){var t=$(".list-product-selected").val().split(",");t.length>0&&$.ajax({type:"Post",url:"UpdateTopicOfProductList",data:{lstProductIds:t,topicId:n},success:function(){$(".pop-up .modal").css("display","none");$(document.body).load(location.href)}})}},articleBlogAdmin={Init:function(){articleBlogAdmin.ChangeImage()},ChangeImage:function(){$(".editor-img").change(function(){var i=this.files[0],n=document.createElement("img"),t;n.src=window.URL.createObjectURL(i);n.style.height="30px";n.onload=function(){window.URL.revokeObjectURL(this.src)};t=$(this).prev();$(t).empty();$(t).append(n)})}},popUpProductInStrategyEdit={OpenClosePopup:function(){$(".pop-up .modal").css("display")==="none"?($(".pop-up .modal").css("display","block"),popUpProductInStrategyEdit.LoadProductList()):$(".pop-up .modal").css("display","none")},LoadProductList:function(){$.trim($(".modal-body").html()).length||$.ajax({type:"Post",url:"GetProductListForPopUpStrategy",data:{strategyId:$("#strategyId").val()},success:function(n){n!==null&&n!==undefined&&($(".modal-body").length<=1&&$(".modal-body").append(n),$.fn.DataTable.isDataTable("#myTable-popup")||$("#myTable-popup").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!1,responsive:!0,stateSave:!0}))}})},GetProductSelect:function(n){if(n>0){var t=$(".list-product-selected").val();t===""?t=n+"":t+=","+n;$(".list-product-selected").val(t)}},SaveListProductToStrategy:function(n){var t=$(".list-product-selected").val().split(",");t.length>0&&$.ajax({type:"Post",url:"AddProductListToStrategy",data:{lstProductIds:t,strategyId:n},success:function(){$(".pop-up .modal").css("display","none");$(document.body).load(location.href)}})},RemoveProductsFromStrategy:function(n){if($(".list-product-item-selected").val()!==undefined){var t=$(".list-product-item-selected").val().split(",");t.length>0&&$.ajax({type:"Post",url:"RemoveFromStrategy",data:{lstProductIds:t,strategyId:n},success:function(){$(document.body).load(location.href)}})}}},strategyAdmin={Init:function(){strategyAdmin.ChangeImage()},ChangeImage:function(){$(".editor-img").change(function(){var i=this.files[0],n=document.createElement("img"),t;n.src=window.URL.createObjectURL(i);n.style.height="30px";n.onload=function(){window.URL.revokeObjectURL(this.src)};t=$(this).prev();$(t).empty();$(t).append(n)})},ChangeStatus:function(n){$.ajax({type:"Post",url:"ChangeStatus",data:{strategyId:n},success:function(){$(document.body).load(location.href)}})},CheckAllStrategy:function(n){var t=n.target;$(t).is(":checked")?($(".select-strategy-item").each(function(){$(this).prop("checked",!0);var n=parseInt($(this).val());strategyAdmin.GetStrategyItemSelect(n,this)}),$(".btn-remove").removeAttr("disabled")):($(".select-strategy-item").each(function(){$(this).prop("checked",!1);$(".list-strategy-item-selected").val("")}),$(".btn-remove").attr("disabled","disabled"))},GetStrategyItemSelect:function(n,t){var i=$(".list-strategy-item-selected").val(),r=t.target!==undefined?t.target:t;$(r).is(":checked")?n>0&&(i===""?i=n+"":i+=","+n,$(".btn-remove").removeAttr("disabled")):n>0&&(i=i.indexOf(","+n)!==-1?i.replace(","+n,""):i.replace(n,""),i===""&&$(".btn-remove").attr("disabled","disabled"));i=i.replace(new RegExp("^,|,$","g"),"");$(".list-strategy-item-selected").val(i)},RemoveAllSelectedInList:function(){if($(".list-strategy-item-selected").val()!==undefined){var n=$(".list-strategy-item-selected").val().split(",");n.length>0&&$.ajax({type:"Post",url:"DeleteStrategy",data:{lstStrategyIds:n},success:function(){$(document.body).load(location.href)}})}}};